<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>
/f0c1s/blog/react-web-dev/tic-tac-toe
</title>
<link rel="stylesheet" href="../../index.css"/> <link rel="stylesheet" href="../../highlight/styles/monokai.min.css"/>
<script src="../../setup.js"></script>
<script src="../../highlight/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
</head>
<body onload="setup()">
<h1>
/f0c1s/blog/react-web-dev/tic-tac-toe
</h1>
<nav>
<a href="../../index.html">/blog</a> <a href="../../react-web-dev/index.html">react web dev</a> <a href="../../react-web-dev/tic-tac-toe/tic-tac-toe.html">+ tic tac toe in React</a>
</nav>
<pre class="shell"><code>yarn create react-app tic-tac-toe --template typescript</code></pre>
<h2 id="basic-setup">Basic setup</h2>
<h3 id="app.css">App.css</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="fu">.App</span> {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>    <span class="kw">padding</span>: <span class="dv">1</span><span class="dt">vh</span> <span class="dv">1</span><span class="dt">vw</span><span class="op">;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>}</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a>h1 {</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a>    <span class="kw">padding</span>: <span class="dv">.6</span><span class="dt">vh</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a>    <span class="kw">font-size</span>: <span class="dv">48</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a>}</span></code></pre></div>
<h3 id="app.tsx">App.tsx</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="im">import</span> React from <span class="st">&#39;react&#39;</span><span class="op">;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="im">import</span> <span class="st">&#39;./App.css&#39;</span><span class="op">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a><span class="im">import</span> Game from <span class="st">&quot;./features/game/Game&quot;</span><span class="op">;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a><span class="kw">function</span> <span class="fu">App</span>() {</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a>    <span class="fu">return</span> (</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a>        <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;App&quot;</span><span class="op">&gt;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a>            <span class="op">&lt;</span>h1<span class="op">&gt;</span>Tic Tac Toe<span class="op">&lt;/</span>h1<span class="op">&gt;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a>            <span class="op">&lt;</span>Game<span class="op">/&gt;</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true"></a>        <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true"></a>    )<span class="op">;</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true"></a>}</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true"></a>export default App<span class="op">;</span></span></code></pre></div>
<h3 id="game.tsx">Game.tsx</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="im">import</span> React from <span class="st">&quot;react&quot;</span><span class="op">;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a><span class="im">import</span> <span class="st">&quot;./game.css&quot;</span><span class="op">;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a>export default <span class="kw">function</span> <span class="fu">Game</span>() {</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a>    return <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;game&quot;</span>}<span class="op">&gt;</span>Game<span class="op">&lt;/</span>div<span class="op">&gt;;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a>}</span></code></pre></div>
<h3 id="game.css">game.css</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="fu">.game</span> {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a>    <span class="kw">padding</span>: <span class="dv">1</span><span class="dt">vh</span> <span class="dv">1</span><span class="dt">vw</span><span class="op">;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a>    <span class="kw">border</span>: <span class="dv">thin</span> <span class="dv">solid</span> <span class="cn">grey</span><span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true"></a>    <span class="kw">min-height</span>: <span class="dv">30</span><span class="dt">vw</span><span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true"></a>}</span></code></pre></div>
<p>And there is a reset.css added to public/index.html</p>
<figure>
<img src="0.project-structure.png" alt="" /><figcaption>0.project-structure</figcaption>
</figure>
<figure>
<img src="1.running-app.png" alt="" /><figcaption>1.running-app</figcaption>
</figure>
<h2 id="basic-grid">Basic grid</h2>
<h3 id="grid.css">grid.css</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="fu">.grid</span> {</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a>    <span class="kw">width</span>: <span class="dv">30</span><span class="dt">vw</span><span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a>    <span class="kw">padding</span>: <span class="dv">1</span><span class="dt">vh</span> <span class="dv">1</span><span class="dt">vw</span><span class="op">;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true"></a>    <span class="kw">display</span>: grid<span class="op">;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true"></a>    <span class="kw">grid-template-columns</span>: <span class="dv">1</span>fr <span class="dv">1</span>fr <span class="dv">1</span>fr<span class="op">;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true"></a>    <span class="kw">grid-gap</span>: <span class="dv">1</span><span class="dt">vh</span><span class="op">;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true"></a>}</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true"></a><span class="fu">.grid-cell</span> {</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true"></a>    <span class="kw">width</span>: <span class="dv">10</span><span class="dt">vw</span><span class="op">;</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true"></a>    <span class="kw">height</span>: <span class="dv">10</span><span class="dt">vh</span><span class="op">;</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true"></a>    <span class="kw">border</span>: <span class="dv">thin</span> <span class="dv">solid</span> <span class="cn">grey</span><span class="op">;</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true"></a>    <span class="kw">cursor</span>: <span class="dv">pointer</span><span class="op">;</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true"></a>}</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true"></a><span class="fu">.grid-cell</span><span class="in">:hover</span> {</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true"></a>    <span class="kw">box-shadow</span>: <span class="dv">0</span> <span class="dv">0</span> <span class="dv">2</span><span class="dt">px</span> <span class="cn">black</span><span class="op">;</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true"></a>}</span></code></pre></div>
<h3 id="grid.tsx">Grid.tsx</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a><span class="im">import</span> React from <span class="st">&quot;react&quot;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a><span class="im">import</span> <span class="st">&quot;./grid.css&quot;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true"></a>interface GridProps {</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true"></a>    rows<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true"></a>    cols<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true"></a>}</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true"></a>export default <span class="kw">function</span> <span class="fu">Grid</span>({rows<span class="op">,</span> cols}<span class="op">:</span> GridProps) {</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true"></a>    const grid <span class="op">=</span> <span class="fu">Array</span>(rows)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true"></a>        <span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true"></a>        <span class="op">.</span><span class="fu">map</span>((_<span class="op">,</span> r) <span class="kw">=&gt;</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true"></a>            <span class="fu">Array</span>(cols)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true"></a>                <span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true"></a>                <span class="op">.</span><span class="fu">map</span>((_<span class="op">,</span> c) <span class="kw">=&gt;</span> <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;grid-cell&quot;</span>} key<span class="op">=</span>{<span class="vs">`grid-cell-</span><span class="sc">${</span>r<span class="sc">}</span><span class="vs">-</span><span class="sc">${</span>c<span class="sc">}</span><span class="vs">`</span>}<span class="op">&gt;&amp;</span>nbsp<span class="op">;&lt;/</span>div<span class="op">&gt;</span> )</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true"></a>        )</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true"></a>    <span class="fu">return</span> (</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true"></a>        <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;grid&quot;</span>}<span class="op">&gt;</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true"></a>            {grid}</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true"></a>        <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true"></a>    )</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true"></a>}</span></code></pre></div>
<h3 id="game.css-1">game.css</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a><span class="fu">.game</span> {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a>    <span class="co">/*padding: 1vh 1vw;*/</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true"></a>    <span class="co">/*border: thin solid silver;*/</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true"></a>    <span class="co">/*min-height: 30vw;*/</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true"></a>}</span></code></pre></div>
<h3 id="game.tsx-1">Game.tsx</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a><span class="im">import</span> React from <span class="st">&quot;react&quot;</span><span class="op">;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a><span class="im">import</span> <span class="st">&quot;./game.css&quot;</span><span class="op">;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true"></a><span class="im">import</span> Grid from <span class="st">&quot;../grid/Grid&quot;</span><span class="op">;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true"></a>export default <span class="kw">function</span> <span class="fu">Game</span>() {</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true"></a>    return <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;game&quot;</span>}<span class="op">&gt;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true"></a>        <span class="op">&lt;</span>Grid rows<span class="op">=</span>{<span class="dv">3</span>} cols<span class="op">=</span>{<span class="dv">3</span>}<span class="op">/&gt;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true"></a>}</span></code></pre></div>
<figure>
<img src="2.basic-grid.png" alt="" /><figcaption>2.basic-grid</figcaption>
</figure>
<figure>
<img src="3.design-so-far.png" alt="" /><figcaption>3.design-so-far</figcaption>
</figure>
<h2 id="cell">Cell</h2>
<h3 id="cell.css">cell.css</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a><span class="fu">.cell</span> {</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a>    <span class="kw">line-height</span>: <span class="dv">10</span><span class="dt">vh</span><span class="op">;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true"></a>    <span class="kw">text-align</span>: <span class="dv">center</span><span class="op">;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true"></a>    <span class="kw">font-size</span>: <span class="dv">56</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true"></a>    <span class="kw">user-select</span>: <span class="dv">none</span><span class="op">;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true"></a>    <span class="kw">cursor</span>: initial<span class="op">;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true"></a>    <span class="kw">width</span>: <span class="bu">inherit</span><span class="op">;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true"></a>    <span class="kw">height</span>: <span class="bu">inherit</span><span class="op">;</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true"></a>}</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true"></a><span class="fu">.cell-empty</span> {</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true"></a>    <span class="kw">cursor</span>: <span class="dv">pointer</span><span class="op">;</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true"></a>}</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true"></a><span class="fu">.cell-empty</span><span class="in">:hover</span> {</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true"></a>    <span class="kw">box-shadow</span>: <span class="dv">0</span> <span class="dv">0</span> <span class="dv">2</span><span class="dt">px</span> <span class="cn">black</span><span class="op">;</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true"></a>}</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true"></a></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true"></a><span class="fu">.cell-X</span> {</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true"></a>    <span class="kw">color</span>: <span class="cn">red</span><span class="op">;</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true"></a>}</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true"></a></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true"></a><span class="fu">.cell-O</span> {</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true"></a>    <span class="kw">color</span>: <span class="cn">blue</span><span class="op">;</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true"></a>}</span></code></pre></div>
<h3 id="cell.tsx">Cell.tsx</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true"></a><span class="im">import</span> React from <span class="st">&quot;react&quot;</span><span class="op">;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true"></a><span class="im">import</span> <span class="st">&quot;./cell.css&quot;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true"></a>export enum CellRenderOptions {</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true"></a>    empty <span class="op">=</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true"></a>    X <span class="op">=</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true"></a>    O <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true"></a>}</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true"></a>export interface CellProps {</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true"></a>    render<span class="op">:</span> CellRenderOptions<span class="op">;</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true"></a>}</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true"></a>export default <span class="kw">function</span> <span class="fu">Cell</span>({render}<span class="op">:</span> CellProps) {</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true"></a>    let toRender<span class="op">;</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true"></a>    <span class="fu">switch</span> (render) {</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true"></a>        case CellRenderOptions<span class="op">.</span><span class="at">empty</span><span class="op">:</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true"></a>            toRender <span class="op">=</span> <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;cell cell-empty&quot;</span>}<span class="op">&gt;&amp;</span>nbsp<span class="op">;&lt;/</span>div<span class="op">&gt;;</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true"></a>            break<span class="op">;</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true"></a>        case CellRenderOptions<span class="op">.</span><span class="at">X</span><span class="op">:</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true"></a>            toRender <span class="op">=</span> <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;cell cell-X&quot;</span>}<span class="op">&gt;</span>X<span class="op">&lt;/</span>div<span class="op">&gt;;</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true"></a>            break<span class="op">;</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true"></a>        case CellRenderOptions<span class="op">.</span><span class="at">O</span><span class="op">:</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true"></a>            toRender <span class="op">=</span> <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;cell cell-O&quot;</span>}<span class="op">&gt;</span>O<span class="op">&lt;/</span>div<span class="op">&gt;;</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true"></a>            break<span class="op">;</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true"></a>    }</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true"></a>    return toRender<span class="op">;</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true"></a>}</span></code></pre></div>
<h3 id="grid.css-1">grid.css</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a><span class="fu">.grid-container</span> {</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true"></a>    <span class="kw">display</span>: <span class="dv">inline-block</span><span class="op">;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true"></a>    <span class="kw">margin</span>: <span class="dv">2</span><span class="dt">vh</span> <span class="dv">3</span><span class="dt">vw</span><span class="op">;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true"></a>}</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true"></a><span class="fu">.grid</span> {</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true"></a>    <span class="kw">width</span>: <span class="dv">30</span><span class="dt">vw</span><span class="op">;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true"></a>    <span class="kw">padding</span>: <span class="dv">1</span><span class="dt">vh</span> <span class="dv">1</span><span class="dt">vw</span><span class="op">;</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true"></a>    <span class="kw">display</span>: grid<span class="op">;</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true"></a>    <span class="kw">grid-template-columns</span>: <span class="dv">1</span>fr <span class="dv">1</span>fr <span class="dv">1</span>fr<span class="op">;</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true"></a>    <span class="kw">grid-gap</span>: <span class="dv">1</span><span class="dt">vh</span><span class="op">;</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true"></a>}</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true"></a><span class="fu">.grid-cell</span> {</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true"></a>    <span class="kw">width</span>: <span class="dv">10</span><span class="dt">vw</span><span class="op">;</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true"></a>    <span class="kw">height</span>: <span class="dv">10</span><span class="dt">vh</span><span class="op">;</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true"></a>    <span class="kw">border</span>: <span class="dv">thin</span> <span class="dv">solid</span> <span class="cn">grey</span><span class="op">;</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true"></a>}</span></code></pre></div>
<h3 id="grid.tsx-1">Grid.tsx</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a><span class="im">import</span> React from <span class="st">&quot;react&quot;</span><span class="op">;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true"></a><span class="im">import</span> <span class="st">&quot;./grid.css&quot;</span><span class="op">;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true"></a><span class="im">import</span> Cell<span class="op">,</span> {CellRenderOptions} from <span class="st">&quot;../cell/Cell&quot;</span><span class="op">;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true"></a>interface GridProps {</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true"></a>    rows<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true"></a>    cols<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true"></a>    fillWith<span class="op">:</span> CellRenderOptions<span class="op">;</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true"></a>}</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true"></a>export default <span class="kw">function</span> <span class="fu">Grid</span>({rows<span class="op">,</span> cols<span class="op">,</span> fillWith}<span class="op">:</span> GridProps) {</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true"></a>    const grid <span class="op">=</span> <span class="fu">Array</span>(rows)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true"></a>        <span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true"></a>        <span class="op">.</span><span class="fu">map</span>((_<span class="op">,</span> r) <span class="kw">=&gt;</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true"></a>            <span class="fu">Array</span>(cols)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true"></a>                <span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>)</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true"></a>                <span class="op">.</span><span class="fu">map</span>((_<span class="op">,</span> c) <span class="kw">=&gt;</span> {</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true"></a>                        return <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;grid-cell&quot;</span>} key<span class="op">=</span>{<span class="vs">`grid-cell-</span><span class="sc">${</span>r<span class="sc">}</span><span class="vs">-</span><span class="sc">${</span>c<span class="sc">}</span><span class="vs">`</span>}<span class="op">&gt;</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true"></a>                            <span class="op">&lt;</span>Cell render<span class="op">=</span>{fillWith}<span class="op">/&gt;</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true"></a>                        <span class="op">&lt;/</span>div<span class="op">&gt;;</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true"></a>                    }</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true"></a>                )</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true"></a>        )<span class="op">;</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true"></a></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true"></a>    <span class="fu">return</span> (</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true"></a>        <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;grid-container&quot;</span>}<span class="op">&gt;</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true"></a>            <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;grid&quot;</span>}<span class="op">&gt;</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true"></a>                {grid}</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true"></a>            <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true"></a>        <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true"></a>    )<span class="op">;</span></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true"></a>}</span></code></pre></div>
<h3 id="game.tsx-2">Game.tsx</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true"></a><span class="im">import</span> React from <span class="st">&quot;react&quot;</span><span class="op">;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true"></a><span class="im">import</span> <span class="st">&quot;./game.css&quot;</span><span class="op">;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true"></a><span class="im">import</span> Grid from <span class="st">&quot;../grid/Grid&quot;</span><span class="op">;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true"></a><span class="im">import</span> {CellRenderOptions} from <span class="st">&quot;../cell/Cell&quot;</span><span class="op">;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true"></a>export default <span class="kw">function</span> <span class="fu">Game</span>() {</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true"></a>    return <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;game&quot;</span>}<span class="op">&gt;</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true"></a>        <span class="op">&lt;</span>Grid rows<span class="op">=</span>{<span class="dv">3</span>} cols<span class="op">=</span>{<span class="dv">3</span>} fillWith<span class="op">=</span>{CellRenderOptions<span class="op">.</span><span class="at">empty</span>}<span class="op">/&gt;</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true"></a>        <span class="op">&lt;</span>Grid rows<span class="op">=</span>{<span class="dv">3</span>} cols<span class="op">=</span>{<span class="dv">3</span>} fillWith<span class="op">=</span>{CellRenderOptions<span class="op">.</span><span class="at">X</span>}<span class="op">/&gt;</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true"></a>        <span class="op">&lt;</span>Grid rows<span class="op">=</span>{<span class="dv">3</span>} cols<span class="op">=</span>{<span class="dv">3</span>} fillWith<span class="op">=</span>{CellRenderOptions<span class="op">.</span><span class="at">O</span>}<span class="op">/&gt;</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;;</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true"></a>}</span></code></pre></div>
<figure>
<img src="4.running-app.png" alt="" /><figcaption>4.running-app</figcaption>
</figure>
<figure>
<img src="5.project-structure.png" alt="" /><figcaption>5.project-structure</figcaption>
</figure>
<figure>
<img src="6.design-so-far.png" alt="" /><figcaption>6.design-so-far</figcaption>
</figure>
<h2 id="working-game">Working game</h2>
<p>This working game is incomplete, and it doesn’t stop until all of the cells are full.</p>
<p>The structure is same, except that code has moved around a bit.</p>
<h3 id="game.tsx-3">Game.tsx</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true"></a><span class="im">import</span> React<span class="op">,</span> {useState} from <span class="st">&quot;react&quot;</span><span class="op">;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true"></a><span class="im">import</span> <span class="st">&quot;./game.css&quot;</span><span class="op">;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true"></a><span class="im">import</span> Grid from <span class="st">&quot;../grid/Grid&quot;</span><span class="op">;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true"></a><span class="im">import</span> {CellRenderOptions} from <span class="st">&quot;../cell/Cell&quot;</span><span class="op">;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true"></a>export default <span class="kw">function</span> <span class="fu">Game</span>() {</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true"></a>    const rows<span class="op">:</span> <span class="dt">number</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true"></a>    const cols<span class="op">:</span> <span class="dt">number</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true"></a>    const initialGridState <span class="op">=</span> <span class="fu">Array</span>(rows)<span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true"></a>        <span class="op">.</span><span class="fu">map</span>(_ <span class="kw">=&gt;</span> <span class="fu">Array</span>(cols)<span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true"></a>            <span class="op">.</span><span class="fu">map</span>(_ <span class="kw">=&gt;</span> CellRenderOptions<span class="op">.</span><span class="at">empty</span>)</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true"></a>        )<span class="op">;</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true"></a>    const [gridState<span class="op">,</span> setGridState] <span class="op">=</span> <span class="fu">useState</span>(initialGridState)<span class="op">;</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true"></a>    const [turn<span class="op">,</span> setTurn] <span class="op">=</span> <span class="fu">useState</span>(CellRenderOptions<span class="op">.</span><span class="at">X</span>)<span class="op">;</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true"></a></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true"></a>    <span class="kw">function</span> <span class="fu">toggleTurn</span>() {</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true"></a>        <span class="fu">if</span> (turn <span class="op">===</span> CellRenderOptions<span class="op">.</span><span class="at">X</span>) {</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true"></a>            <span class="fu">setTurn</span>(CellRenderOptions<span class="op">.</span><span class="at">O</span>)<span class="op">;</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true"></a>        } else {</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true"></a>            <span class="fu">setTurn</span>(CellRenderOptions<span class="op">.</span><span class="at">X</span>)<span class="op">;</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true"></a>        }</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true"></a>    }</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true"></a></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true"></a>    <span class="kw">function</span> <span class="fu">onEmptyCellClick</span>(row<span class="op">:</span> <span class="dt">number</span><span class="op">,</span> col<span class="op">:</span> <span class="dt">number</span>) {</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true"></a>        <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(row<span class="op">,</span> col<span class="op">,</span> turn)<span class="op">;</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true"></a>        <span class="co">// generate new state</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true"></a>        const newGridState <span class="op">=</span> gridState<span class="op">.</span><span class="fu">map</span>((values<span class="op">,</span> rowIndex) <span class="kw">=&gt;</span> values<span class="op">.</span><span class="fu">map</span>((value<span class="op">,</span> colIndex) <span class="kw">=&gt;</span> {</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true"></a>            return row <span class="op">===</span> rowIndex <span class="op">&amp;&amp;</span> col <span class="op">===</span> colIndex <span class="op">?</span> turn <span class="op">:</span> value</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true"></a>        }))</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true"></a>        <span class="fu">setGridState</span>(newGridState)</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true"></a>        <span class="co">// finally toggle turn</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true"></a>        <span class="fu">toggleTurn</span>()<span class="op">;</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true"></a>    }</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true"></a></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true"></a>    return <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;game&quot;</span>}<span class="op">&gt;</span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true"></a>        <span class="op">&lt;</span>Grid onEmptyCellClick<span class="op">=</span>{onEmptyCellClick} grid<span class="op">=</span>{gridState}<span class="op">/&gt;</span></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;;</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true"></a>}</span></code></pre></div>
<p>In Game, we have moved rows, columns and initialGridState out of Grid itself. Via <code>initialGridState</code> we are passing the grid to display to <code>Grid</code> component.</p>
<p>This dumbs down the <code>Grid</code> component a bit. There is no logic in <code>Grid</code>, and it basically just renders out the <code>Cell</code> component with appropriate grid-cell value passed to it.</p>
<p>Let’s take a look at <code>initialGridState</code></p>
<h4 id="initialgridstate"><code>initialGridState</code></h4>
<div class="sourceCode" id="cb16"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true"></a>const initialGridState <span class="op">=</span> <span class="fu">Array</span>(rows)<span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true"></a>        <span class="op">.</span><span class="fu">map</span>(_ <span class="kw">=&gt;</span> <span class="fu">Array</span>(cols)<span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true"></a>            <span class="op">.</span><span class="fu">map</span>(_ <span class="kw">=&gt;</span> CellRenderOptions<span class="op">.</span><span class="at">empty</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true"></a>        )<span class="op">;</span></span></code></pre></div>
<p>This code is generating rows and columns containing <code>CellRenderOptions.empty</code>, which renders an empty cell when rendering <code>Cell</code> component.</p>
<h4 id="turn-and-toggleturn"><code>turn</code> and <code>toggleTurn</code></h4>
<p>A <code>turn</code> keeps track of the turn of the player. First turn is always of <code>X</code> and after the turn, next turn is <code>O</code>. We are not keeping track of when the game is over yet.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true"></a>const [turn<span class="op">,</span> setTurn] <span class="op">=</span> <span class="fu">useState</span>(CellRenderOptions<span class="op">.</span><span class="at">X</span>)<span class="op">;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true"></a><span class="kw">function</span> <span class="fu">toggleTurn</span>() {</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true"></a>    <span class="fu">if</span> (turn <span class="op">===</span> CellRenderOptions<span class="op">.</span><span class="at">X</span>) {</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true"></a>        <span class="fu">setTurn</span>(CellRenderOptions<span class="op">.</span><span class="at">O</span>)<span class="op">;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true"></a>    } else {</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true"></a>        <span class="fu">setTurn</span>(CellRenderOptions<span class="op">.</span><span class="at">X</span>)<span class="op">;</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true"></a>    }</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true"></a>}</span></code></pre></div>
<p>The toggleTurn function code can be shortened to:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true"></a>const newTurn <span class="op">=</span> turn <span class="op">===</span> CellRenderOptions<span class="op">.</span><span class="at">X</span> <span class="op">?</span> CellRenderOptions<span class="op">.</span><span class="at">O</span> <span class="op">:</span> CellRenderOptions<span class="op">.</span><span class="at">X</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true"></a><span class="fu">setTurn</span>(newTurn)</span></code></pre></div>
<h4 id="click-an-empty-cell">Click an empty cell</h4>
<p>We are allowing to click only the empty cell, this way, users cannot overwrite the written cell and we don’t need to keep track of whether the cell was empty or not.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true"></a><span class="kw">function</span> <span class="fu">onEmptyCellClick</span>(row<span class="op">:</span> <span class="dt">number</span><span class="op">,</span> col<span class="op">:</span> <span class="dt">number</span>) {</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(row<span class="op">,</span> col<span class="op">,</span> turn)<span class="op">;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true"></a>    <span class="co">// generate new state</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true"></a>    const newGridState <span class="op">=</span> gridState<span class="op">.</span><span class="fu">map</span>((values<span class="op">,</span> rowIndex) <span class="kw">=&gt;</span> values<span class="op">.</span><span class="fu">map</span>((value<span class="op">,</span> colIndex) <span class="kw">=&gt;</span> {</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true"></a>        return row <span class="op">===</span> rowIndex <span class="op">&amp;&amp;</span> col <span class="op">===</span> colIndex <span class="op">?</span> turn <span class="op">:</span> value</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true"></a>    }))</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true"></a>    <span class="fu">setGridState</span>(newGridState)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true"></a>    <span class="co">// finally toggle turn</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true"></a>    <span class="fu">toggleTurn</span>()<span class="op">;</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true"></a>}</span></code></pre></div>
<p><code>onEmptyCellClick</code> accepts <code>row</code> and <code>col</code>, which get passed to it from <code>Grid</code> component.</p>
<p>On clicking the cell, this function gets executed, and it generates a new grid state, since we have this function in the <code>Game</code>, we have access to <code>gridState</code>.</p>
<p>This was Game.tsx.</p>
<h3 id="grid.tsx-2">Grid.tsx</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true"></a><span class="im">import</span> React from <span class="st">&quot;react&quot;</span><span class="op">;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true"></a><span class="im">import</span> <span class="st">&quot;./grid.css&quot;</span><span class="op">;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true"></a><span class="im">import</span> Cell<span class="op">,</span> {CellRenderOptions} from <span class="st">&quot;../cell/Cell&quot;</span><span class="op">;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true"></a>interface GridProps {</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true"></a>    onEmptyCellClick<span class="op">:</span> Function<span class="op">;</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true"></a>    grid<span class="op">:</span> <span class="dt">any</span>[]</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true"></a>}</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true"></a>export default <span class="kw">function</span> <span class="fu">Grid</span>({onEmptyCellClick<span class="op">,</span> grid}<span class="op">:</span> GridProps) {</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true"></a></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true"></a>    const renderGrid <span class="op">=</span> grid</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true"></a>        <span class="op">.</span><span class="fu">map</span>((row<span class="op">,</span> rowIndex) <span class="kw">=&gt;</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true"></a>            row<span class="op">.</span><span class="fu">map</span>((fillWith<span class="op">:</span> CellRenderOptions<span class="op">,</span> colIndex<span class="op">:</span> <span class="dt">number</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true"></a>                        return <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;grid-cell&quot;</span>} key<span class="op">=</span>{<span class="vs">`grid-cell-</span><span class="sc">${</span>rowIndex<span class="sc">}</span><span class="vs">-</span><span class="sc">${</span>colIndex<span class="sc">}</span><span class="vs">`</span>}<span class="op">&gt;</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true"></a>                            <span class="op">&lt;</span>Cell render<span class="op">=</span>{fillWith} onEmptyCellClick<span class="op">=</span>{() <span class="kw">=&gt;</span> <span class="fu">onEmptyCellClick</span>(rowIndex<span class="op">,</span> colIndex)}<span class="op">/&gt;</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true"></a>                        <span class="op">&lt;/</span>div<span class="op">&gt;;</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true"></a>                    }</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true"></a>                )</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true"></a>        )<span class="op">;</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true"></a></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true"></a>    <span class="fu">return</span> (</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true"></a>        <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;grid-container&quot;</span>}<span class="op">&gt;</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true"></a>            <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;grid&quot;</span>}<span class="op">&gt;</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true"></a>                {renderGrid}</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true"></a>            <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true"></a>        <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true"></a>    )<span class="op">;</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true"></a>}</span></code></pre></div>
<p>The <code>Grid</code> component now deals with only the <code>grid</code> state which is managed by <code>Game</code>.</p>
<p>If you notice, <code>grid</code> type is <code>CellRenderOptions[][]</code>.</p>
<figure>
<img src="7.working-app-but-incomplete.png" alt="" /><figcaption>7.working-app-but-incomplete</figcaption>
</figure>
<p>As you can see, we can click the cells, and the cell gets rendered correctly, but we are not tracking when the game is over.</p>
<figure>
<img src="8.design-so-far.png" alt="" /><figcaption>8.design-so-far</figcaption>
</figure>
<p>You can see that I am keeping function params in member list. That’s because our components depend upon it.</p>
<h3 id="grid.css-2">grid.css</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true"></a><span class="fu">.grid-container</span> {</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true"></a>    <span class="kw">display</span>: <span class="dv">inline-block</span><span class="op">;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true"></a>    <span class="kw">margin</span>: <span class="dv">30</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true"></a>    <span class="co">/*background-color: navy;*/</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true"></a>}</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true"></a><span class="fu">.grid</span> {</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true"></a>    <span class="kw">min-width</span>: <span class="dv">30</span><span class="dt">vw</span><span class="op">;</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true"></a>    <span class="kw">padding</span>: <span class="dv">10</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true"></a>    <span class="kw">display</span>: grid<span class="op">;</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true"></a>    <span class="kw">grid-template-columns</span>: <span class="dv">1</span>fr <span class="dv">1</span>fr <span class="dv">1</span>fr<span class="op">;</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true"></a>    <span class="kw">grid-gap</span>: <span class="dv">10</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true"></a>}</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true"></a></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true"></a><span class="fu">.grid-cell</span> {</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true"></a>    <span class="kw">width</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true"></a>    <span class="kw">height</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true"></a>    <span class="kw">border</span>: <span class="dv">thin</span> <span class="dv">solid</span> <span class="cn">grey</span><span class="op">;</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true"></a>    <span class="co">/*background-color: white;*/</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true"></a>}</span></code></pre></div>
<h3 id="cell.css-1">cell.css</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true"></a><span class="fu">.cell</span> {</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true"></a>    <span class="kw">line-height</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true"></a>    <span class="kw">text-align</span>: <span class="dv">center</span><span class="op">;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true"></a>    <span class="kw">font-size</span>: <span class="dv">72</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true"></a>    <span class="kw">user-select</span>: <span class="dv">none</span><span class="op">;</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true"></a>    <span class="kw">cursor</span>: initial<span class="op">;</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true"></a>    <span class="kw">width</span>: <span class="bu">inherit</span><span class="op">;</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true"></a>    <span class="kw">height</span>: <span class="bu">inherit</span><span class="op">;</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true"></a>}</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true"></a></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true"></a><span class="fu">.cell-empty</span> {</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true"></a>    <span class="kw">cursor</span>: <span class="dv">pointer</span><span class="op">;</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true"></a>}</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true"></a></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true"></a><span class="fu">.cell-empty</span><span class="in">:hover</span> {</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true"></a>    <span class="kw">box-shadow</span>: <span class="dv">0</span> <span class="dv">0</span> <span class="dv">2</span><span class="dt">px</span> <span class="cn">black</span><span class="op">;</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true"></a>}</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true"></a></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true"></a><span class="fu">.cell-X</span> {</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true"></a>    <span class="kw">color</span>: <span class="cn">red</span><span class="op">;</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true"></a>}</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true"></a></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true"></a><span class="fu">.cell-O</span> {</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true"></a>    <span class="kw">color</span>: <span class="cn">blue</span><span class="op">;</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true"></a>}</span></code></pre></div>
<p>Design has changed a little bit to keep the height and width of cell to <code>100px</code>. This removes dependency over height and width of visual area of the browser.</p>
<h2 id="working-game-1">Working game</h2>
<h3 id="game.tsx-4">Game.tsx</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true"></a><span class="im">import</span> React<span class="op">,</span> {useEffect<span class="op">,</span> useState} from <span class="st">&quot;react&quot;</span><span class="op">;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true"></a><span class="im">import</span> <span class="st">&quot;./game.css&quot;</span><span class="op">;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true"></a><span class="im">import</span> Grid from <span class="st">&quot;../grid/Grid&quot;</span><span class="op">;</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true"></a><span class="im">import</span> {CellRenderOptions} from <span class="st">&quot;../cell/Cell&quot;</span><span class="op">;</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true"></a><span class="im">import</span> GameOver from <span class="st">&quot;../gameover/GameOver&quot;</span><span class="op">;</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true"></a><span class="im">import</span> GameDraw from <span class="st">&quot;../gamedraw/GameDraw&quot;</span><span class="op">;</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true"></a>export default <span class="kw">function</span> <span class="fu">Game</span>() {</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true"></a>    const rows<span class="op">:</span> <span class="dt">number</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true"></a>    const cols<span class="op">:</span> <span class="dt">number</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true"></a>    const initialGridState <span class="op">=</span> <span class="fu">Array</span>(rows)<span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true"></a>        <span class="op">.</span><span class="fu">map</span>(_ <span class="kw">=&gt;</span> <span class="fu">Array</span>(cols)<span class="op">.</span><span class="fu">fill</span>(<span class="dv">0</span>)</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true"></a>            <span class="op">.</span><span class="fu">map</span>(_ <span class="kw">=&gt;</span> CellRenderOptions<span class="op">.</span><span class="at">empty</span>)</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true"></a>        )<span class="op">;</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true"></a>    const [gridState<span class="op">,</span> setGridState] <span class="op">=</span> <span class="fu">useState</span>(initialGridState)<span class="op">;</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true"></a>    const [turn<span class="op">,</span> setTurn] <span class="op">=</span> <span class="fu">useState</span>(CellRenderOptions<span class="op">.</span><span class="at">X</span>)<span class="op">;</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true"></a>    const [gameState<span class="op">,</span> setGameState] <span class="op">=</span> <span class="fu">useState</span>(<span class="st">&quot;running&quot;</span>)<span class="op">;</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true"></a></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true"></a>    <span class="kw">function</span> <span class="fu">toggleTurn</span>() {</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true"></a>        <span class="fu">if</span> (turn <span class="op">===</span> CellRenderOptions<span class="op">.</span><span class="at">X</span>) {</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true"></a>            <span class="fu">setTurn</span>(CellRenderOptions<span class="op">.</span><span class="at">O</span>)<span class="op">;</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true"></a>        } else {</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true"></a>            <span class="fu">setTurn</span>(CellRenderOptions<span class="op">.</span><span class="at">X</span>)<span class="op">;</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true"></a>        }</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true"></a>    }</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true"></a></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true"></a>    <span class="kw">function</span> <span class="fu">isGameOver</span>(array<span class="op">:</span> CellRenderOptions[][]) {</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true"></a>        const row <span class="op">=</span> (i<span class="op">:</span> <span class="dt">number</span>) <span class="kw">=&gt;</span> [array[i][<span class="dv">0</span>]<span class="op">,</span> array[i][<span class="dv">1</span>]<span class="op">,</span> array[i][<span class="dv">2</span>]]<span class="op">;</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true"></a>        const col <span class="op">=</span> (i<span class="op">:</span> <span class="dt">number</span>) <span class="kw">=&gt;</span> [array[<span class="dv">0</span>][i]<span class="op">,</span> array[<span class="dv">1</span>][i]<span class="op">,</span> array[<span class="dv">2</span>][i]]<span class="op">;</span></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true"></a>        const diagonals <span class="op">=</span> [[array[<span class="dv">0</span>][<span class="dv">0</span>]<span class="op">,</span> array[<span class="dv">1</span>][<span class="dv">1</span>]<span class="op">,</span> array[<span class="dv">2</span>][<span class="dv">2</span>]]<span class="op">,</span></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true"></a>            [array[<span class="dv">2</span>][<span class="dv">0</span>]<span class="op">,</span> array[<span class="dv">1</span>][<span class="dv">1</span>]<span class="op">,</span> array[<span class="dv">0</span>][<span class="dv">2</span>]]]<span class="op">;</span></span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true"></a>        const values <span class="op">=</span> [<span class="fu">row</span>(<span class="dv">0</span>)<span class="op">,</span> <span class="fu">row</span>(<span class="dv">1</span>)<span class="op">,</span> <span class="fu">row</span>(<span class="dv">2</span>)<span class="op">,</span> <span class="fu">col</span>(<span class="dv">0</span>)<span class="op">,</span> <span class="fu">col</span>(<span class="dv">1</span>)<span class="op">,</span> <span class="fu">col</span>(<span class="dv">2</span>)<span class="op">,</span> <span class="op">...</span>diagonals]<span class="op">;</span></span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true"></a>        return values<span class="op">.</span><span class="fu">some</span>(v <span class="kw">=&gt;</span> v<span class="op">.</span><span class="fu">every</span>(i <span class="kw">=&gt;</span> i <span class="op">===</span> CellRenderOptions<span class="op">.</span><span class="at">X</span>)) <span class="op">||</span> values<span class="op">.</span><span class="fu">some</span>(v <span class="kw">=&gt;</span> v<span class="op">.</span><span class="fu">every</span>(i <span class="kw">=&gt;</span> i <span class="op">===</span> CellRenderOptions<span class="op">.</span><span class="at">O</span>))<span class="op">;</span></span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true"></a>    }</span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true"></a></span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true"></a>    <span class="fu">useEffect</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true"></a>        <span class="co">// check game state</span></span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true"></a>        const gameover <span class="op">=</span> <span class="fu">isGameOver</span>(gridState)<span class="op">;</span></span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true"></a></span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true"></a>        <span class="fu">if</span> (gameover) {</span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true"></a>            <span class="fu">setGameState</span>(<span class="st">&quot;over&quot;</span>)<span class="op">;</span></span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true"></a>        }</span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true"></a></span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true"></a>        <span class="fu">if</span>(gridState<span class="op">.</span><span class="fu">every</span>(row <span class="kw">=&gt;</span> row<span class="op">.</span><span class="fu">every</span>(col <span class="kw">=&gt;</span> col <span class="op">!==</span> CellRenderOptions<span class="op">.</span><span class="at">empty</span>))) {</span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true"></a>            <span class="fu">setGameState</span>(<span class="st">&quot;draw&quot;</span>)</span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true"></a>        }</span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true"></a>    }<span class="op">,</span> [gridState])<span class="op">;</span></span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true"></a></span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true"></a>    <span class="kw">function</span> <span class="fu">onEmptyCellClick</span>(row<span class="op">:</span> <span class="dt">number</span><span class="op">,</span> col<span class="op">:</span> <span class="dt">number</span>) {</span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true"></a>        <span class="co">// console.log(row, col, turn);</span></span>
<span id="cb23-51"><a href="#cb23-51" aria-hidden="true"></a></span>
<span id="cb23-52"><a href="#cb23-52" aria-hidden="true"></a>        <span class="fu">if</span> (gameState <span class="op">===</span> <span class="st">&quot;running&quot;</span>) {</span>
<span id="cb23-53"><a href="#cb23-53" aria-hidden="true"></a>            <span class="co">// generate new state</span></span>
<span id="cb23-54"><a href="#cb23-54" aria-hidden="true"></a>            const newGridState <span class="op">=</span> gridState<span class="op">.</span><span class="fu">map</span>((values<span class="op">,</span> rowIndex) <span class="kw">=&gt;</span> values<span class="op">.</span><span class="fu">map</span>((value<span class="op">,</span> colIndex) <span class="kw">=&gt;</span> {</span>
<span id="cb23-55"><a href="#cb23-55" aria-hidden="true"></a>                return row <span class="op">===</span> rowIndex <span class="op">&amp;&amp;</span> col <span class="op">===</span> colIndex <span class="op">?</span> turn <span class="op">:</span> value<span class="op">;</span></span>
<span id="cb23-56"><a href="#cb23-56" aria-hidden="true"></a>            }))<span class="op">;</span></span>
<span id="cb23-57"><a href="#cb23-57" aria-hidden="true"></a>            <span class="fu">setGridState</span>(newGridState)<span class="op">;</span></span>
<span id="cb23-58"><a href="#cb23-58" aria-hidden="true"></a></span>
<span id="cb23-59"><a href="#cb23-59" aria-hidden="true"></a>            <span class="co">// finally toggle turn</span></span>
<span id="cb23-60"><a href="#cb23-60" aria-hidden="true"></a>            <span class="fu">toggleTurn</span>()<span class="op">;</span></span>
<span id="cb23-61"><a href="#cb23-61" aria-hidden="true"></a>        }</span>
<span id="cb23-62"><a href="#cb23-62" aria-hidden="true"></a>    }</span>
<span id="cb23-63"><a href="#cb23-63" aria-hidden="true"></a></span>
<span id="cb23-64"><a href="#cb23-64" aria-hidden="true"></a>    <span class="kw">function</span> <span class="fu">resetGame</span>() {</span>
<span id="cb23-65"><a href="#cb23-65" aria-hidden="true"></a>        <span class="fu">setGameState</span>(<span class="st">&quot;running&quot;</span>)<span class="op">;</span></span>
<span id="cb23-66"><a href="#cb23-66" aria-hidden="true"></a>        <span class="fu">setGridState</span>(initialGridState)<span class="op">;</span></span>
<span id="cb23-67"><a href="#cb23-67" aria-hidden="true"></a>        <span class="fu">setTurn</span>(CellRenderOptions<span class="op">.</span><span class="at">X</span>)<span class="op">;</span></span>
<span id="cb23-68"><a href="#cb23-68" aria-hidden="true"></a>    }</span>
<span id="cb23-69"><a href="#cb23-69" aria-hidden="true"></a></span>
<span id="cb23-70"><a href="#cb23-70" aria-hidden="true"></a>    return <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;game&quot;</span>}<span class="op">&gt;</span></span>
<span id="cb23-71"><a href="#cb23-71" aria-hidden="true"></a>        <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;game-controls&quot;</span>}<span class="op">&gt;</span></span>
<span id="cb23-72"><a href="#cb23-72" aria-hidden="true"></a>            <span class="op">&lt;</span>button <span class="kw">type</span><span class="op">=</span>{<span class="st">&quot;button&quot;</span>} onClick<span class="op">=</span>{() <span class="kw">=&gt;</span> <span class="fu">resetGame</span>()}<span class="op">&gt;</span>reset<span class="op">&lt;/</span>button<span class="op">&gt;</span></span>
<span id="cb23-73"><a href="#cb23-73" aria-hidden="true"></a>        <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb23-74"><a href="#cb23-74" aria-hidden="true"></a>        <span class="op">&lt;</span>Grid onEmptyCellClick<span class="op">=</span>{onEmptyCellClick} grid<span class="op">=</span>{gridState}<span class="op">/&gt;</span></span>
<span id="cb23-75"><a href="#cb23-75" aria-hidden="true"></a>        {gameState <span class="op">===</span> <span class="st">&quot;over&quot;</span> <span class="op">&amp;&amp;</span> <span class="op">&lt;</span>GameOver turn<span class="op">=</span>{turn}<span class="op">/&gt;</span>}</span>
<span id="cb23-76"><a href="#cb23-76" aria-hidden="true"></a>        {gameState <span class="op">===</span> <span class="st">&quot;draw&quot;</span> <span class="op">&amp;&amp;</span> <span class="op">&lt;</span>GameDraw <span class="op">/&gt;</span>}</span>
<span id="cb23-77"><a href="#cb23-77" aria-hidden="true"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;;</span></span>
<span id="cb23-78"><a href="#cb23-78" aria-hidden="true"></a>}</span></code></pre></div>
<h3 id="gameover.tsx">GameOver.tsx</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true"></a><span class="im">import</span> React from <span class="st">&quot;react&quot;</span><span class="op">;</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true"></a><span class="im">import</span> {CellRenderOptions} from <span class="st">&quot;../cell/Cell&quot;</span><span class="op">;</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true"></a>interface GameOverProps {</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true"></a>    turn<span class="op">:</span> CellRenderOptions<span class="op">;</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true"></a>}</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true"></a>export default <span class="kw">function</span> <span class="fu">GameOver</span>({turn}<span class="op">:</span> GameOverProps) {</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true"></a>    return <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;game-over&quot;</span>}<span class="op">&gt;</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true"></a>        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Game over<span class="op">&lt;/</span>h2<span class="op">&gt;</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true"></a>        <span class="op">&lt;</span>h3<span class="op">&gt;</span>{turn <span class="op">===</span> CellRenderOptions<span class="op">.</span><span class="at">X</span> <span class="op">?</span> <span class="st">&quot;O&quot;</span> <span class="op">:</span> <span class="st">&quot;X&quot;</span>} won<span class="op">&lt;/</span>h3<span class="op">&gt;</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;;</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true"></a>}</span></code></pre></div>
<h3 id="gamedraw.tsx">GameDraw.tsx</h3>
<div class="sourceCode" id="cb25"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true"></a><span class="im">import</span> React from <span class="st">&quot;react&quot;</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true"></a>export default <span class="kw">function</span> <span class="fu">GameDraw</span>() {</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true"></a>    return <span class="op">&lt;</span>div className<span class="op">=</span>{<span class="st">&quot;game-draw&quot;</span>}<span class="op">&gt;</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true"></a>        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Game ends in a draw<span class="op">!&lt;/</span>h2<span class="op">&gt;</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true"></a>}</span></code></pre></div>
<figure>
<img src="9.game-ends-in-a-draw.png" alt="" /><figcaption>9.game-ends-in-a-draw</figcaption>
</figure>
<figure>
<img src="10.x-won.png" alt="" /><figcaption>10.x-won</figcaption>
</figure>
<figure>
<img src="11.o-won.png" alt="" /><figcaption>11.o-won</figcaption>
</figure>
<h2 id="redux">redux</h2>
<p>to be continued…</p>
</body>
</html>
