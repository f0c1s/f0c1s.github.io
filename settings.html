<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>Settings on blog.f0c1s.com</title>
    <link href="index.css" rel="stylesheet"/>
    <script async src="setup.js"></script>
</head>
<body onload="setup(); localSetup();">
<h1>/f0c1s/blog/settings</h1>
<nav>
    <a href="./index.html">&laquo;blog</a>
</nav>
<fieldset>
    <legend>Color mode</legend>
    <label for="color_mode_light">light
        <input id="color_mode_light" name="color_mode" onchange="onColorModeSelect(this)" type="radio"
               value="light"/>
    </label>
    <label for="color_mode_dark">dark
        <input id="color_mode_dark" name="color_mode" onchange="onColorModeSelect(this)" type="radio" value="dark"/>
    </label>
    <label for="color_mode_pink">pink
        <input id="color_mode_pink" name="color_mode" onchange="onColorModeSelect(this)" type="radio" value="pink"/>
    </label>
    <label for="color_mode_teal">teal
        <input id="color_mode_teal" name="color_mode" onchange="onColorModeSelect(this)" type="radio" value="teal"/>
    </label>
    <label for="color_mode_hico_white">high contrast white
        <input id="color_mode_hico_white" name="color_mode" onchange="onColorModeSelect(this)" type="radio"
               value="hico_white"/>
    </label>
    <label for="color_mode_hico_dark">high contrast dark
        <input id="color_mode_hico_dark" name="color_mode" onchange="onColorModeSelect(this)" type="radio"
               value="hico_dark"/>
    </label>
</fieldset>

<fieldset>
    <legend>Fonts</legend>
    <label for="font_text">text font family:
        <select id="font_text" name="font_text" onchange="onTextFontFamilySelect(this)">
            <option value="monospace">monospace</option>
            <option value="sans-serif">sans serif</option>
            <option value="serif">serif</option>
            <option value="ComicNeueRegular">comic neue regular</option>
            <option value="SatisfyRegular">satisfy regular</option>
            <option value="SrirachaRegular">sriracha regular</option>
            <option value="CaveatRegular">caveat regular</option>
            <option value="PacificoRegular">pacifico regular</option>
            <option value="KalamRegular">kalam regular</option>
        </select>
    </label>
    <label for="font_text_size">text font size:
        <input id="font_text_size" max="32" min="8"
               name="font_text_size"
               onchange="onTextFontSizeChange(this)" type="range"
               value="14"/>
        <span id="font_text_size_value"></span>px
    </label>

</fieldset>

<script>

    function onTextFontSizeChange(e) {
        console.log(e, typeof e, e.value);
        localStorage.setItem('text-font-size', e.value);
        document.querySelector('body').style.fontSize = e.value + 'px';
        document.querySelector("#font_text_size_value").innerHTML = e.value;
    }

    function onTextFontFamilySelect(e) {
        localStorage.setItem('text-font-family', e.value);
        document.querySelector('body').style.fontFamily = e.value;
        // document.location = document.location;
    }

    function onColorModeSelect(e) {
        localStorage.setItem('color-mode', e.value);
        document.querySelector('body').className = e.value;
        // document.location = document.location;
        // window.location = window.location;
    }

    function localSetup() {
        const storedColorMode = localStorage.getItem('color-mode');
        const colorModeRadios = Array.from(document.querySelectorAll('input[type="radio"][name="color_mode"]'));
        colorModeRadios.filter(radio => radio.id.includes(storedColorMode)).forEach(radio => radio.checked = "checked");

        // font family
        const fontFamily = localStorage.getItem("text-font-family");
        Array.from(document.querySelectorAll("#font_text option")).forEach(x => x.selected = fontFamily === x.value);

        // font size
        const fontSize = localStorage.getItem("text-font-size");
        document.querySelector("#font_text_size").value = fontSize;
        document.querySelector("#font_text_size_value").innerHTML = fontSize;
    }
</script>
</body>
</html>
