<meta charset="UTF-8">
<link rel="stylesheet" href="../index.css"/>
<link rel="stylesheet" href="../highlight/styles/monokai.min.css"/>
<script src="../highlight/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

<body class="aoc 2021 aoc2021">
<h1>/f0c1s/blog/aoc2021/day-3</h1>
<p>
    <a href="../index.html">/blog</a>
    <a href="../aoc2021/index.html">aoc2021</a>
    <a href="../aoc2021/aoc2021-day-3.html">+ day 3</a>
</p>
<p>
    This page contains solutions for Advent Of Code 2021 Day #3.
</p>
<h2>JavaScript</h2>

<h3>Part 1</h3>
<pre class="code js">
    <code class="language-javascript">
#!/usr/bin/env node

const {readFileSync} = require('fs');

const lines = readFileSync(0).toString().split('\n');
const splitted = lines.map(line => line.split(''));
// console.log(splitted);

function decode(a, c) {
return c.map(i => i === '0' ? -1 : 1).map((v, i) => a[i] += v);
}

const initial = splitted[0].map(i => 0);
// console.log(initial);
const out = splitted.reduce(decode, initial);
// console.log(out);

function toGamma(value) {
const v = value.map(i => i > 0 ? 1 : 0).join('');
// console.log(v, 'gamma');
return parseInt(v, 2);
}

function toEpsilon(value) {
const v = value.map(i => i < 0 ? 1 : 0).join('');
// console.log(v, 'epsilon');
return parseInt(v, 2);
}

const gamma = toGamma(out);
const epsilon = toEpsilon(out);
    </code>
</pre>

<h3>Part 2</h3>
<pre class="code js">
    <code class="language-javascript">
#!/usr/bin/env node

let life_support_rating = 0;
let oxygen_generator_rating = 0;
let co2_scrubber_rating = 0;

const len = initial.length;

function findMajorityBit(list, bit) {
    // console.log(bit);
    const zeros = list.filter(i => i[bit] === '0');
    const ones = list.filter(i => i[bit] === '1');
    // console.log({ones, zeros});
    return ones.length - zeros.length;
}

function pruneList(list, forPositive = true) {
    let pruned = list;//.map(i => i);
    for (let i = 0; i < len && pruned.length > 1; i++) {
        // console.log(pruned);
        if (findMajorityBit(pruned, i) >= 0) {
            pruned = pruned.filter(l => l[i] === (forPositive ? '1' : '0'));
        } else {
            pruned = pruned.filter(l => l[i] === (forPositive ? '0' : '1'));
        }
    }
    return parseInt(pruned.pop().join(''), 2);
}

function pruneListForPositive(list) {
    return pruneList(list, true);
}

function pruneListForNegative(list) {
    return pruneList(list, false);
}
    </code>
</pre>
</body>
