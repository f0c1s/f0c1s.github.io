<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../index.css"/>
<link rel="stylesheet" href="../highlight/styles/monokai.min.css"/>
<script src="../highlight/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

<body class="aoc 2021 aoc2021">
<h1>/f0c1s/blog/aoc2021/day-5</h1>
<p>
    <a href="../index.html">/blog</a>
    <a href="../aoc2021/index.html">aoc2021</a>
    <a href="../aoc2021/aoc2021-day-5.html">+ day 5</a>
</p>
<p>
    This page contains solutions for Advent Of Code 2021 Day #5.
</p>
<h2>JavaScript</h2>

<h3>Part 1</h3>
<pre class="code js">
    <code class="language-javascript">
#!/usr/bin/env node

const data = _data.toString()
    .split('\n')
    .map(d => d.split(' -> '))
    .filter(i => i.length > 1);

// console.log(data);
/*
[
  [ '217,490', '217,764' ], [ '44,270', '373,599' ],  [ '440,139', '440,303' ],
  [ '161,663', '345,663' ], [ '848,963', '908,963' ], [ '299,207', '162,70' ],
...
]
 */

const lines = data
    .map(d => ({s: d[0], e: d[1]}))
    .map(d => (
        {
            s: {x: parseInt(d.s.split(',')[0]), y: parseInt(d.s.split(',')[1])},
            e: {x: parseInt(d.e.split(',')[0]), y: parseInt(d.e.split(',')[1])}
        }
    ));
// console.log(lines);
/*
[
  { s: { x: 217, y: 490 }, e: { x: 217, y: 764 } },
  { s: { x: 44, y: 270 }, e: { x: 373, y: 599 } },
...
]
 */

const plain = Array(1000).fill(0).map(_ => Array(1000).fill(0).map(_ => 0));
// console.log(plain)

lines.forEach(line => {
    if (line.s.x === line.e.x) {
        if (line.s.y <= line.e.y) {
            for (let y = line.s.y; y <= line.e.y; y++) {
                plain[line.s.x][y] = plain[line.s.x][y] + 1;
            }
        } else {
            for (let y = line.e.y; y <= line.s.y; y++) {
                plain[line.s.x][y] = plain[line.s.x][y] + 1;
            }
        }
    } else if (line.s.y === line.e.y) {
        if (line.s.x <= line.e.x) {
            for (let x = line.s.x; x <= line.e.x; x++) {
                plain[x][line.s.y] = plain[x][line.s.y] + 1;
            }
        } else {
            for (let x = line.e.x; x <= line.s.x; x++) {
                plain[x][line.s.y] = plain[x][line.s.y] + 1;
            }
        }
    }
});

// console.log(JSON.stringify(plain));

console.log(plain
    .reduce((plainSum, line) => {
        // console.log(line);
        return plainSum + (line.filter(point => point > 1).length);
    }, 0));
    </code>
</pre>

<h3>Part 2</h3>
<pre class="code js">
    <code class="language-javascript">
#!/usr/bin/env node

const data = _data.toString()
    .split('\n')
    .map(d => d.split(' -> '))
    .filter(i => i.length > 1);

// console.log(data);
/*
[
  [ '217,490', '217,764' ], [ '44,270', '373,599' ],  [ '440,139', '440,303' ],
  [ '161,663', '345,663' ], [ '848,963', '908,963' ], [ '299,207', '162,70' ],
...
]
 */

const lines = data
    .map(d => ({s: d[0], e: d[1]}))
    .map(d => (
        {
            s: {x: parseInt(d.s.split(',')[0]), y: parseInt(d.s.split(',')[1])},
            e: {x: parseInt(d.e.split(',')[0]), y: parseInt(d.e.split(',')[1])}
        }
    ));
// console.log(lines);
/*
[
  { s: { x: 217, y: 490 }, e: { x: 217, y: 764 } },
  { s: { x: 44, y: 270 }, e: { x: 373, y: 599 } },
...
]
 */

const plain = Array(1000).fill(0).map(_ => Array(1000).fill(0).map(_ => 0));
// console.log(plain)

lines.forEach(line => {
    if (line.s.x === line.e.x) {
        if (line.s.y <= line.e.y) {
            for (let y = line.s.y; y <= line.e.y; y++) {
                plain[line.s.x][y] = plain[line.s.x][y] + 1;
            }
        } else {
            for (let y = line.e.y; y <= line.s.y; y++) {
                plain[line.s.x][y] = plain[line.s.x][y] + 1;
            }
        }
    } else if (line.s.y === line.e.y) {
        if (line.s.x <= line.e.x) {
            for (let x = line.s.x; x <= line.e.x; x++) {
                plain[x][line.s.y] = plain[x][line.s.y] + 1;
            }
        } else {
            for (let x = line.e.x; x <= line.s.x; x++) {
                plain[x][line.s.y] = plain[x][line.s.y] + 1;
            }
        }
    } else if (Math.abs((line.e.y - line.s.y) / (line.e.x - line.s.x)) === 1) {
        console.log(line);
        /* diagonal line with slope 1 */
        if (line.s.x < line.e.x) {
            // if start x is smaller
            if (line.s.y < line.e.y) {
                // if start y is smaller 1,1 -> 20,20
                for (let x = line.s.x, y = line.s.y; x <= line.e.x && y <= line.e.y; x++, y++) {
                    plain[x][y] = plain[x][y] + 1;
                    console.log(x, y, plain[x][y], (line.e.y - line.s.y) / (line.e.x - line.s.x));
                }
            } else {
                // if start y is bigger 1,20 -> 20,1
                for (let x = line.s.x, y = line.s.y; x <= line.e.x && y >= line.e.y; x++, y--) {
                    plain[x][y] = plain[x][y] + 1;
                    console.log(x, y, plain[x][y], (line.e.y - line.s.y) / (line.e.x - line.s.x));
                }
            }
        } else {
            // if start x is bigger
            if (line.s.y < line.e.y) {
                // if start y is smaller 20,1 -> 1,20
                for (let x = line.e.x, y = line.e.y; x <= line.s.x && y >= line.s.y; x++, y--) {
                    plain[x][y] = plain[x][y] + 1;
                    console.log(x, y, plain[x][y], (line.e.y - line.s.y) / (line.e.x - line.s.x));
                }
            } else {
                // if start y is bigger 20,20 -> 1,1
                for (let x = line.e.x, y = line.e.y; x <= line.s.x && y <= line.s.y; x++, y++) {
                    plain[x][y] = plain[x][y] + 1;
                    console.log(x, y, plain[x][y], (line.e.y - line.s.y) / (line.e.x - line.s.x));
                }
            }
        }
    }
});

// console.log(JSON.stringify(plain));

console.log(plain
    .reduce((plainSum, line) => {
        // console.log(line);
        return plainSum + (line.filter(point => point > 1).length);
    }, 0));
    </code>
</pre>
</body>
