<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../index.css"/>
<link rel="stylesheet" href="../highlight/styles/monokai.min.css"/>
<script src="../highlight/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

<h1>/f0c1s/blog/articles/Use const in ECMAScript</h1>
<p>
    <a href="../index.html">/blog</a>
    <a href="./index.html">articles</a>
    <a href="./use-const-in-ecmascript.html">+ Use const in ECMAScript</a>
    
</p>

<p>#programming #ecmascript #const #let #lexical #scope</p>
<h2 id="quick-summary">Quick Summary</h2>
<ul>
<li><code>const</code> is the new <code>var</code>.</li>
<li>ditch <code>function fn() {}</code> for <code>const fn = () =&gt; {}</code>.</li>
<li><code>const</code> everywhere.</li>
<li>no reassignments; ever!</li>
</ul>
<blockquote>
<p>Table 1 - <code>reassignment</code>, <code>redeclaration</code>, <code>hoisting</code> and <code>scoping</code> for <code>var</code>, <code>let</code> and <code>const</code> variables</p>
</blockquote>
<table>
<thead>
<tr class="header">
<th></th>
<th style="text-align: left;">reassignment</th>
<th style="text-align: left;">redeclaration</th>
<th style="text-align: left;">hoisting</th>
<th style="text-align: left;">scoping</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>var</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">Variable scope</td>
</tr>
<tr class="even">
<td>let</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">Lexical scope</td>
</tr>
<tr class="odd">
<td>const</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">Lexical scope</td>
</tr>
</tbody>
</table>
<h2 id="summary">Summary</h2>
<p>ES2015 introduced <code>let</code> and <code>const</code> keywords.<br />
These works by making <strong>variables</strong> block level.</p>
<p><code>let</code> allows you to declare a variable which can be reassigned;<br />
<code>const</code> allows you do declare variables which cannot be reassigned.<br />
<code>var</code> is old and trusted friend which allows for reassignment, redeclaration and hoisting.</p>
<p><code>let</code> is <code>{}</code> scoped variable.<br />
<code>const</code> is <code>{}</code> scoped variable.<br />
<code>var</code> is <code>function(){}</code> scoped variable.</p>
<p><code>let</code> redeclaration fails with <code>SyntaxError: Identifier '...' has already been declared</code><br />
<code>const</code> reassignment fails with <code>TypeError: Assignment to constant variable.</code><br />
<code>var</code>: <em>I see no problem in redeclaration or reassignment.</em></p>
<p><a href="https://www.ecma-international.org/ecma-262/8.0/index.html#sec-declarations-and-the-variable-statement">Even standard calls them variable.</a></p>
<ul>
<li>Why should you use <code>const</code>?
<ul>
<li>Because it is <strong>the new <code>var</code></strong>.<br />
</li>
<li>Because reassignment is hard to track.</li>
</ul></li>
<li>Why should your variables not be reassigned?
<ul>
<li>Every useful processing on data should be named appropriately.<br />
</li>
<li>But what about loops?
<ul>
<li>You don’t want to write loops in 2018.</li>
</ul></li>
</ul></li>
</ul>
<p>Now let’s look at the definitions from the ECMA-262 standard.</p>
<h2 id="standard">Standard</h2>
<p>According to <a href="https://www.ecma-international.org/ecma-262/8.0/index.html#sec-declarations-and-the-variable-statement">ECMA-262 # 13.3 Declarations and the Variable Statement</a></p>
<blockquote>
<p>A <code>var</code> statement declares variables that are scoped to the <code>running execution context</code>’s <code>VariableEnvironment</code>. …</p>
</blockquote>
<blockquote>
<p><code>let</code> and <code>const</code> declarations define variables that are scoped to the <code>running execution context</code>’s <code>LexicalEnvironment</code>. …</p>
</blockquote>
<p><strong><code>const</code> are variables.</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a>    <span class="co">// assigning a mutable object to person variable.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>    <span class="kw">const</span> person <span class="op">=</span> { <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;someone&#39;</span> }<span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a>    <span class="co">// allowed operation on mutable object.</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a>    person<span class="op">.</span><span class="at">name</span> <span class="op">=</span> <span class="st">&#39;who now?&#39;</span><span class="op">;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>    <span class="co">// assigning an immutable object to anubhav variable.</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a>    <span class="kw">const</span> anubhav <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">freeze</span>({ <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;Anu&#39;</span> })<span class="op">;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a>    <span class="co">// Not an error but, it will fail silently. SILENT FAIL!!!</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a>    anubhav<span class="op">.</span><span class="at">name</span> <span class="op">=</span> <span class="st">&#39;this assignment will not be effective&#39;</span><span class="op">;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a>    anubhav<span class="op">.</span><span class="at">name</span> <span class="op">===</span> <span class="st">&#39;Anu&#39;</span> <span class="co">// is true</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a>    <span class="co">// FAILS with Uncaught TypeError: Assignment to constant variable.</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a>    anubhav <span class="op">=</span> person<span class="op">;</span></span></code></pre></div>
<p><em><code>const</code> are variables</em> <strong>with immutable bindings.</strong></p>
<p>This should be enough for you to stop reading here.</p>
<h2 id="the-long-tail">The Long Tail</h2>
<p>(incomplete; visit next month for updates)</p>
<p>I am going to further explain why you must use <code>const</code> and later only <code>const</code>.</p>
<h3 id="scoping">Scoping</h3>
<p><code>var</code> creates variables in &lt;Variable Scope&gt;.<br />
<code>let</code> creates variables in &lt;Lexical Scope&gt;.<br />
<code>const</code> creates variables in &lt;Lexical Scope&gt;.</p>
<p><code>var</code> not only allows reassignments, it allows redeclaration. It also hoists the variables up.<br />
<code>let</code> allows reassignment, it doesn’t allow redeclaration.<br />
<code>const</code> allows neither reassignment nor redeclaration.</p>
<h4 id="example">Example</h4>
<p>Let’s look at a simple example:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a>    <span class="op">&gt;</span> <span class="kw">var</span> x <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>    <span class="op">&gt;</span> x</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>    <span class="dv">10</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a>    <span class="op">&gt;</span> <span class="kw">var</span> x <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a>    <span class="op">&gt;</span> x</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a>    <span class="dv">20</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true"></a>    <span class="op">&gt;</span> <span class="kw">let</span> y <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true"></a>    <span class="op">&gt;</span> y</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true"></a>    <span class="dv">10</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true"></a>    <span class="op">&gt;</span> <span class="kw">let</span> y <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true"></a>    <span class="bu">SyntaxError</span><span class="op">:</span> Identifier <span class="st">&#39;y&#39;</span> has already been declared</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true"></a>    <span class="op">&gt;</span> <span class="kw">const</span> z <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true"></a>    <span class="op">&gt;</span> z</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true"></a>    <span class="dv">10</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true"></a>    <span class="op">&gt;</span> <span class="kw">const</span> z <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true"></a>    <span class="bu">SyntaxError</span><span class="op">:</span> Identifier <span class="st">&#39;z&#39;</span> has already been declared</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true"></a>    <span class="op">&gt;</span> y <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true"></a>    <span class="dv">20</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true"></a>    <span class="op">&gt;</span> y</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true"></a>    <span class="dv">20</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true"></a>    <span class="op">&gt;</span> z <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true"></a>    <span class="bu">TypeError</span><span class="op">:</span> Assignment to constant variable<span class="op">.</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true"></a>    <span class="op">&gt;</span> z</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true"></a>    <span class="dv">10</span></span></code></pre></div>
<p>This is what happened. When we defined <code>x</code> and assigned the value 10. Then, we checked the value, it is 10. After checking the value, we redeclared <code>x</code> and assigned it new value of 20. In next line, we check it.</p>
<p>Then we declare <code>y</code> and assign it the value 10. We check it to be 10. Then we try to redeclare <code>y</code>. This fails with the Error of the type <code>SyntaxError</code>. The exact message is <code>SyntaxError: Identifier 'y' has already been declared</code>. I am not reassigning as of right now. I will do that later to differentiate with <code>const</code> variable.</p>
<p>Next up: declaration and assignment for a <code>const</code> variable with value 10. It goes smoothly. A quick check of the value, it has 10, good. Then we try to redeclare it and find the same errror. The exact error message is: <code>SyntaxError: Identifier 'z' has already been declared</code>.</p>
<p>Then we try to reassign <code>y</code> the value 20; this works. We check it’s value to be 20, and it is. Next up is reassignment of variable <code>z</code>. This fails; with error of the type <code>TypeError</code>. The exact message being <code>TypeError: Assignment to constant variable.</code>.</p>
<p>Let’s recap quickly.</p>
<blockquote>
<p>TABLE 0 - tl;dr what you have read so far.</p>
</blockquote>
<table>
<thead>
<tr class="header">
<th></th>
<th style="text-align: left;">reassignment</th>
<th style="text-align: left;">redeclaration</th>
<th style="text-align: left;">hoisting</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>var</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">Ja</td>
<td style="text-align: left;">like a boss</td>
</tr>
<tr class="even">
<td>let</td>
<td style="text-align: left;">Ja</td>
<td style="text-align: left;">identity crisis</td>
<td style="text-align: left;">hard NO</td>
</tr>
<tr class="odd">
<td>const</td>
<td style="text-align: left;">confusion intensifies</td>
<td style="text-align: left;">no-can-do</td>
<td style="text-align: left;">no-can-do-aswell</td>
</tr>
</tbody>
</table>
<p>Or if you prefer cleaner version for citation:</p>
<blockquote>
<p>Table 1 - <code>reassignment</code>, <code>redeclaration</code>, <code>hoisting</code> and <code>scoping</code> for <code>var</code>, <code>let</code> and <code>const</code> variables</p>
</blockquote>
<table>
<thead>
<tr class="header">
<th></th>
<th style="text-align: left;">reassignment</th>
<th style="text-align: left;">redeclaration</th>
<th style="text-align: left;">hoisting</th>
<th style="text-align: left;">scoping</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>var</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">Variable scope</td>
</tr>
<tr class="even">
<td>let</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">Lexical scope</td>
</tr>
<tr class="odd">
<td>const</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">Lexical scope</td>
</tr>
</tbody>
</table>
<p>In this document, so far, my attempt has been to let you know two thigs,<br />
1) difference between <code>var</code>, <code>let</code>, and <code>const</code> in context of <code>redeclaration</code>, <code>reassignment</code>, <code>hoisting</code> and <code>scoping</code>.<br />
2) make you learn it automagically through repetition.</p>
<h3 id="the-new-language-challenge">the new language challenge</h3>
<p>There are two kinds of people when it comes to learning new natural language.<br />
One who care and take time learn mannerisms of new language;<br />
second, who keep struggling with it forever and have deep accents.</p>
<p>While speaking in natural language is easier since there is no <code>segfault</code> in real life; speaking programming language sticking to concepts from older language is recipe for disaster. This makes people want to figure out good and bad parts and write about it.</p>
<h4 id="semantics-and-syntax-of-new-language">semantics and syntax of new language</h4>
<p>When going to a language, you must use <strong><em>that</em></strong> language’s semantics and syntax.</p>
<h5 id="natural-language">natural language</h5>
<p>Take German for example, <em>“Kannst du mir bitte helfen?”</em> means “Can you please help me?” in English.<br />
But the verbatim translation is “Can you me please help?”.<br />
Doesn’t sound good. And even though you can understand you feel icky as it sounds awkward.</p>
<p>This has nice parallel to programming languages.</p>
<p>But this creates a problem.</p>
<blockquote>
<p>People rushing from other langauges assume the workings of the language to be the similar to that of their former language.</p>
</blockquote>
<h4 id="the-es-rush">The ES rush</h4>
<p>Programmers are rushing to EcmaScript from all other languages since ES2011 update.<br />
A lot of enterprise software is written in ES these days (circa 2018). This is good for ES.<br />
People rushing from other langauges assume the workings of the language to be the similar to that of their former language.<br />
ES2015 upgrade has brought a lot of new features.<br />
These features make EcmaScript look like Java. You can say, there is some Java in JavaScript now.<br />
Some of these new features are just syntactic sugar and some are really powerful.</p>
<p>One such syntactic sugar-cube is <code>class</code>.<br />
It looks like <code>Class</code> from <code>Java</code>, <code>C#</code> etc.<br />
Some developers like it, some don’t.</p>
<p><code>let</code> and <code>const</code> were brought in 2015 version too.<br />
This has allowed blocks to own variables’ and their lifecycle.<br />
These variables can be Garbage Collected sooner and more memory freed early.<br />
Thus giving applications more memory.<br />
And hopefully a snappier feel.</p>
<h4 id="when-const-is-constant-in-other-languages">when <code>const</code> is constant in other languages</h4>
<p>Now, in some languages, when you <code>const</code> a value, you actually freeze it’s value, it’s reference and bind reference to the name.<br />
This makes <code>const</code> declarations a constants.<br />
This is a feature supported by the compiler and the language grammar.</p>
<h4 id="const-is-variable-in-es"><code>const</code> is variable in ES</h4>
<p>EcmaScript on the other hand, doesn’t specify <code>constant</code>; it allows for <code>variable</code> via <code>const</code> keyword.<br />
This has some programmers throw hands up and refuse to use <code>const</code> in their code base at all.</p>
<blockquote>
<p>The difference between constant and a variable?<br />
Constants don’t change in value and variables do.</p>
</blockquote>
<blockquote>
<p>The difference between a <code>const</code> variable and a <code>let</code> variable?<br />
<code>let</code> allows for the reference to the value change; <code>const</code> doesn’t.</p>
</blockquote>
<hr />
<h3 id="detour">Detour</h3>
<p>Now, let’s get back to the language and follow-it’s-grammar-rules land. “When in Rome, do as Romans do” is not just a cliche; ask anyone who travels a lot. This is an adage to live by.</p>
<p>When you go to Germany, and speak German, you don’t speak by English grammar rules, or Chinese grammar rules. You also don’t insist that German newspaper should not use words that have different meaning in their native-tongue.</p>
<p>English “bad” is “mies” in German. But German “bad” (das Bad) means the bathroom in English. Now, a Brit cannot declare that German shouldn’t have “Bad” in their vocabulary or day-to-day use because majority <code>(English Speakers / (English + German Speakers))</code> means “bad” when they say “bad”.</p>
<p>German (lang) speaking Brit or English speaking German (person) will have to learn to express thoughts carefully and see that the conversation is not marred by the ambiguity.</p>
<h4 id="aaaand-back-to-const">Aaaand back to <code>const</code></h4>
<p>This brings us back to <code>const</code>; just because other languages mean something different; doesn’t mean that one shouldn’t use <code>const</code> in ES. Quite the contrary actually, everyone should learn the difference and keep the code cleaner.</p>
<hr />
<h3 id="the-ideal-debate">The ideal debate</h3>
<p>( or the way I hope it goes):</p>
<p>N.B. I am biased in this debate, I’ll have my way.</p>
<p>Situation: I wrote code using <code>const</code>; this makes me confident that on one will move the variable reference under my feet willy-nilly.</p>
<pre class="text"><code>    Reviewer: In this codebase we don&#39;t use `const`. Please remove.

    Me: Why is that?

    Reviewer: That has been decided earlier and that&#39;s how it is. Please conform to the design principles laid out.

    Me: I understand that. Could you please help me out by letting me know what was the rationale behind it? 
    It would help me explain it to junior and/or future developers.

    Reviewer: We don&#39;t use `const` because anybody can still add or even modify object values. 
    Your code wouldn&#39;t know it and it might create hard to track problems.

    Me: But we have a competent review process; I am sure a cometent reviewer will catch this.

    Reviewer: True, but mistakes can slip through. Take a look at your spellings for instance, you missed a `p` in second use of the word competent. And `const` gives readers a feel that it is a constant; which it is not and I am sure it is a code smell.

    Me: Thanks for signalling out the typo. But standard doesn&#39;t say that `const` means constant object types. In ES, objects can only be frozen using either Object.freeze or via setting modifiable flag in `Object.create()`. `const` is a variable type.

    Reviewer: I don&#39;t think so.

    Me: Here&#39;s the standard: https://www.ecma-international.org/ecma-262/8.0/index.html#sec-declarations-and-the-variable-statement

    Reviewer: Hmmm, okay. `const` are variables. It seems `const` is new `var`.

    </code></pre>
<hr />
<h2 id="faq">FAQ</h2>
<ul>
<li>Why use <code>const</code>?
<ul>
<li>It’s the new <code>var</code>. <em>Read “<code>const</code> is the new <code>var</code>”.</em></li>
<li>Variables should not be reassigned or rebound. <em>Read “The flow of code: Single assignment”.</em></li>
<li>The drawback of <code>const</code> that <strong>you can modify object</strong>; exists for <code>var</code> and for every other object in EcmaScript.
<ul>
<li>Except frozen objects.</li>
</ul></li>
<li>Makes variables block scoped; decreases visibility and consequently chances of screwing up.</li>
<li>Doesn’t hoist variables automatically; you don’t have to hoist variables manually. <em>Read “Hoist Ho”.</em></li>
<li>Even in function declarations. Helps catch bugs as redeclaration of functions can be caught. <em>Read “Function redefinition”.</em></li>
</ul></li>
<li>Why use <code>let</code>?
<ul>
<li>use <code>let</code> when you don’t have value available to bind right now.</li>
</ul></li>
<li>Why use <code>var</code>?
<ul>
<li>When you hate your co-workers.</li>
<li>When you hate clean code.</li>
<li>Jeebus, still? I give up!</li>
</ul></li>
</ul>
<hr />
<h2 id="const-is-the-new-var"><code>const</code> is the new <code>var</code></h2>
<h3 id="no-difference">No difference</h3>
<h4 id="var-code"><code>var</code> code</h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a>    <span class="kw">var</span> person <span class="op">=</span> {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a>        <span class="dt">name</span><span class="op">:</span> {</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a>            <span class="dt">first</span><span class="op">:</span> <span class="st">&#39;Anu&#39;</span><span class="op">,</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a>            <span class="dt">last</span><span class="op">:</span> <span class="st">&#39;Saini&#39;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a>        }<span class="op">,</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a>        <span class="dt">twitter</span><span class="op">:</span> <span class="st">&#39;f0c1s&#39;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a>    }<span class="op">;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true"></a>    person<span class="op">.</span><span class="at">preferredLanguage</span> <span class="op">=</span> <span class="st">&#39;EcmaScript&#39;</span><span class="op">;</span></span></code></pre></div>
<h4 id="const-code"><code>const</code> code</h4>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a>    <span class="kw">const</span> person <span class="op">=</span> {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a>        <span class="dt">name</span><span class="op">:</span> {</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a>            <span class="dt">first</span><span class="op">:</span> <span class="st">&#39;Anu&#39;</span><span class="op">,</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true"></a>            <span class="dt">last</span><span class="op">:</span> <span class="st">&#39;Saini&#39;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true"></a>        }<span class="op">,</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true"></a>        <span class="dt">twitter</span><span class="op">:</span> <span class="st">&#39;f0c1s&#39;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true"></a>    }<span class="op">;</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true"></a>    person<span class="op">.</span><span class="at">preferredLanguage</span> <span class="op">=</span> <span class="st">&#39;EcmaScript&#39;</span><span class="op">;</span></span></code></pre></div>
<h3 id="difference">Difference</h3>
<h4 id="reassignment">Reassignment</h4>
<h5 id="var-code-1"><code>var</code> code</h5>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a>    <span class="kw">var</span> cost <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a>    <span class="cf">if</span> (saturday) {</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true"></a>        cost <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true"></a>    }</span></code></pre></div>
<h5 id="const-code-1"><code>const</code> code</h5>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a>    <span class="kw">const</span> cost <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a>    <span class="cf">if</span> (saturday) {</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true"></a>        cost <span class="op">=</span> <span class="dv">20</span><span class="op">;</span> <span class="co">// error</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true"></a>    }</span></code></pre></div>
<h4 id="scope">Scope</h4>
<h5 id="var-code-2"><code>var</code> code</h5>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a>    <span class="kw">var</span> cost <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true"></a>    <span class="cf">if</span> (saturday) {</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true"></a>        <span class="kw">var</span> cost <span class="op">=</span> <span class="dv">20</span><span class="op">;</span> <span class="co">// same scope; same variable</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true"></a>    }</span></code></pre></div>
<h5 id="const-code-2"><code>const</code> code</h5>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a>    <span class="kw">const</span> cost <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true"></a>    <span class="cf">if</span> (saturday) {</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true"></a>        <span class="kw">const</span> cost <span class="op">=</span> <span class="dv">20</span><span class="op">;</span> <span class="co">// different scope; different variable</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true"></a>    }</span></code></pre></div>
<h4 id="redeclaration">Redeclaration</h4>
<h5 id="var-code-3"><code>var</code> code</h5>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a>    <span class="kw">var</span> cost <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a>    <span class="kw">var</span> cost <span class="op">=</span> <span class="dv">20</span><span class="op">;</span> <span class="co">// same scope; same variable; allowed</span></span></code></pre></div>
<h5 id="const-code-3"><code>const</code> code</h5>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true"></a>    <span class="kw">const</span> cost <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true"></a>    <span class="kw">const</span> cost <span class="op">=</span> <span class="dv">20</span><span class="op">;</span> <span class="co">// same scope; not allowed: SyntaxError</span></span></code></pre></div>
<hr />
<h2 id="the-flow-of-code-single-assignment.">The flow of code: Single assignment.</h2>
<p>Read “Worst possible assignment strategy”.</p>
<h3 id="bad-code">bad code</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a>    <span class="kw">const</span> onServiceResponse <span class="op">=</span> (error<span class="op">,</span> response) <span class="kw">=&gt;</span> {</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true"></a>        <span class="cf">if</span>(error) {</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true"></a>            error <span class="op">=</span> <span class="kw">new</span> <span class="fu">ServiceError</span>(error)<span class="op">;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true"></a>            debug<span class="op">.</span><span class="fu">log</span>(error)<span class="op">;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true"></a>            error <span class="op">=</span> <span class="fu">logger</span>(error)<span class="op">;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true"></a>            debug<span class="op">.</span><span class="fu">log</span>(error)<span class="op">;</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true"></a>            <span class="cf">return</span> <span class="fu">callback</span>(error)<span class="op">;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true"></a>        }</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true"></a>        <span class="kw">let</span> items <span class="op">=</span> _<span class="op">.</span><span class="fu">get</span>(response<span class="op">,</span> <span class="st">&#39;body.items&#39;</span>)<span class="op">;</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true"></a>        items <span class="op">=</span> items<span class="op">.</span><span class="fu">filter</span>(i <span class="kw">=&gt;</span> i<span class="op">.</span><span class="at">value</span> <span class="op">&gt;</span> <span class="dv">100</span>)<span class="op">.</span><span class="fu">filter</span>(i <span class="kw">=&gt;</span> [<span class="st">&#39;M&#39;</span><span class="op">,</span> <span class="st">&#39;P&#39;</span><span class="op">,</span> <span class="st">&#39;Z&#39;</span>]<span class="op">.</span><span class="fu">includes</span>(i<span class="op">.</span><span class="at">category</span>))<span class="op">;</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true"></a>        items <span class="op">=</span> items<span class="op">.</span><span class="fu">map</span>(i <span class="kw">=&gt;</span> { <span class="cf">return</span> { <span class="dt">name</span><span class="op">:</span> i<span class="op">.</span><span class="at">name</span><span class="op">,</span> <span class="dt">price</span><span class="op">:</span> i<span class="op">.</span><span class="at">price</span> } })<span class="op">;</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true"></a>        <span class="fu">callback</span>(<span class="kw">null</span><span class="op">,</span> items)<span class="op">;</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true"></a>    }<span class="op">;</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true"></a>    <span class="fu">service</span>(params<span class="op">,</span> options<span class="op">,</span> onServiceResponse)<span class="op">;</span></span></code></pre></div>
<h3 id="good-code">good code</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a>    <span class="kw">const</span> onServiceResponse <span class="op">=</span> (error<span class="op">,</span> response) <span class="kw">=&gt;</span> {</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true"></a>        <span class="cf">if</span>(error) {</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true"></a>            <span class="kw">const</span> serviceError <span class="op">=</span> <span class="kw">new</span> <span class="fu">ServiceError</span>(error)<span class="op">;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true"></a>            <span class="kw">const</span> loggedError <span class="op">=</span> <span class="fu">logger</span>(serviceError)<span class="op">;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true"></a>            <span class="cf">return</span> <span class="fu">callback</span>(loggedError)<span class="op">;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true"></a>        }</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true"></a>        <span class="kw">const</span> items <span class="op">=</span> _<span class="op">.</span><span class="fu">get</span>(response<span class="op">,</span> <span class="st">&#39;body.items&#39;</span>)<span class="op">;</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true"></a>        <span class="kw">const</span> validItems <span class="op">=</span> items<span class="op">.</span><span class="fu">filter</span>(i <span class="kw">=&gt;</span> i<span class="op">.</span><span class="at">value</span> <span class="op">&gt;</span> <span class="dv">100</span>)<span class="op">.</span><span class="fu">filter</span>(i <span class="kw">=&gt;</span> [<span class="st">&#39;M&#39;</span><span class="op">,</span> <span class="st">&#39;P&#39;</span><span class="op">,</span> <span class="st">&#39;Z&#39;</span>]<span class="op">.</span><span class="fu">includes</span>(i<span class="op">.</span><span class="at">category</span>))<span class="op">;</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true"></a>        <span class="kw">const</span> displayItems <span class="op">=</span> validItems<span class="op">.</span><span class="fu">map</span>(i <span class="kw">=&gt;</span> { <span class="cf">return</span> { <span class="dt">name</span><span class="op">:</span> i<span class="op">.</span><span class="at">name</span><span class="op">,</span> <span class="dt">price</span><span class="op">:</span> i<span class="op">.</span><span class="at">price</span> } })<span class="op">;</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true"></a>        <span class="fu">callback</span>(<span class="kw">null</span><span class="op">,</span> displayItems)<span class="op">;</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true"></a>    }<span class="op">;</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true"></a>    <span class="fu">service</span>(params<span class="op">,</span> options<span class="op">,</span> onServiceResponse)<span class="op">;</span></span></code></pre></div>
<hr />
<h2 id="worst-possible-assignment-strategy">Worst possible assignment strategy</h2>
<p>This is applicable to <code>var</code>, <code>let</code>, <code>const</code>. None of them can possibly save you from doing this.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true"></a>    <span class="kw">const</span> onServiceResponse <span class="op">=</span> (error<span class="op">,</span> response) <span class="kw">=&gt;</span> {</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true"></a>        <span class="cf">if</span>(error) {</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true"></a>            error <span class="op">=</span> <span class="kw">new</span> <span class="fu">ServiceError</span>(error)<span class="op">;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true"></a>            debug<span class="op">.</span><span class="fu">log</span>(error)<span class="op">;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true"></a>            error <span class="op">=</span> <span class="fu">logger</span>(error)<span class="op">;</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true"></a>            debug<span class="op">.</span><span class="fu">log</span>(error)<span class="op">;</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true"></a>            <span class="cf">return</span> <span class="fu">callback</span>(error)<span class="op">;</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true"></a>        }</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true"></a>        <span class="kw">var</span> items <span class="op">=</span> (_items <span class="op">=</span> _<span class="op">.</span><span class="fu">get</span>(response<span class="op">,</span> <span class="st">&#39;body.items&#39;</span>)<span class="op">,</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true"></a>            _items <span class="op">=</span> _items<span class="op">.</span><span class="fu">filter</span>(i <span class="kw">=&gt;</span> i<span class="op">.</span><span class="at">value</span> <span class="op">&gt;</span> <span class="dv">100</span>)<span class="op">.</span><span class="fu">filter</span>(i <span class="kw">=&gt;</span> [<span class="st">&#39;M&#39;</span><span class="op">,</span> <span class="st">&#39;P&#39;</span><span class="op">,</span> <span class="st">&#39;Z&#39;</span>]<span class="op">.</span><span class="fu">includes</span>(i<span class="op">.</span><span class="at">category</span>))<span class="op">,</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true"></a>            _items <span class="op">=</span> _items<span class="op">.</span><span class="fu">map</span>(i <span class="kw">=&gt;</span> { <span class="cf">return</span> { <span class="dt">name</span><span class="op">:</span> i<span class="op">.</span><span class="at">name</span><span class="op">,</span> <span class="dt">price</span><span class="op">:</span> i<span class="op">.</span><span class="at">price</span> } })<span class="op">,</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true"></a>            _items)<span class="op">;</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true"></a>        <span class="fu">callback</span>(<span class="kw">null</span><span class="op">,</span> items)<span class="op">;</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true"></a>    }<span class="op">;</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true"></a></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true"></a>    <span class="fu">service</span>(params<span class="op">,</span> options<span class="op">,</span> onServiceResponse)<span class="op">;</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true"></a>    </span></code></pre></div>
<h3 id="simpler-example-with-literal">simpler example with literal</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true"></a>    <span class="kw">var</span> a <span class="op">=</span> (_a <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> _a <span class="op">=</span> _a <span class="op">+</span> <span class="dv">10</span><span class="op">,</span> _a <span class="op">=</span> _a <span class="op">*</span> _a<span class="op">,</span> _a)<span class="op">;</span></span></code></pre></div>
<h3 id="the-real-stinker">the real stinker</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true"></a>    <span class="kw">const</span> person <span class="op">=</span> (_person <span class="op">=</span> {}<span class="op">,</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true"></a>        _person[<span class="st">&#39;name&#39;</span>] <span class="op">=</span> <span class="st">&#39;somename&#39;</span><span class="op">,</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true"></a>        _person[<span class="st">&#39;aga&#39;</span>] <span class="op">=</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true"></a>        _person)<span class="op">;</span></span></code></pre></div>
<hr />
<h2 id="hoist-ho">Hoist Ho!</h2>
<p><strong><em>Declare variables where you need/use principle.</em></strong></p>
<h3 id="variable-hoisting">variable hoisting</h3>
<h4 id="var-code-4"><code>var</code> code</h4>
<div class="sourceCode" id="cb17"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true"></a>    <span class="kw">function</span> <span class="fu">binary</span> (input) {</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true"></a>        <span class="cf">return</span> input <span class="op">?</span> <span class="kw">true</span> <span class="op">:</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true"></a>    }</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true"></a>    <span class="co">/* variable name is hoisted up; thus no error while console.log(name) the first time */</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true"></a>    <span class="kw">function</span> <span class="fu">get</span> () {</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true"></a>        <span class="kw">var</span> shouldLog <span class="op">=</span> <span class="fu">binary</span>(name)<span class="op">;</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true"></a>        <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(name)<span class="op">;</span> <span class="co">// logger.log</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true"></a>        <span class="kw">var</span> name <span class="op">=</span> <span class="st">&#39;Anu&#39;</span><span class="op">;</span> <span class="co">// service.getName();</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true"></a>        <span class="kw">var</span> shouldLog <span class="op">=</span> <span class="fu">binary</span>(name)<span class="op">;</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true"></a>        <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(name)<span class="op">;</span> <span class="co">// logger.log</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true"></a>        <span class="cf">return</span> name<span class="op">;</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true"></a>    }</span></code></pre></div>
<h4 id="const-code-4"><code>const</code> code</h4>
<p>No hoisting; only errors here.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true"></a>    <span class="kw">function</span> <span class="fu">binary</span> (input) {</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true"></a>        <span class="cf">return</span> input <span class="op">?</span> <span class="kw">true</span> <span class="op">:</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true"></a>    }</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true"></a>    <span class="co">// no hoist.</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true"></a>    <span class="kw">function</span> <span class="fu">get</span> () {</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true"></a>        <span class="kw">var</span> shouldLog <span class="op">=</span> <span class="fu">binary</span>(name)<span class="op">;</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true"></a>        <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(name)<span class="op">;</span> <span class="co">// logger.log // error</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true"></a>        <span class="kw">const</span> name <span class="op">=</span> <span class="st">&#39;Anu&#39;</span><span class="op">;</span> <span class="co">// service.getName(); // declare where need/use principle</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true"></a>        <span class="kw">var</span> shouldLog <span class="op">=</span> <span class="fu">binary</span>(name)<span class="op">;</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true"></a>        <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(name)<span class="op">;</span> <span class="co">// logger.log</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true"></a>        <span class="cf">return</span> name<span class="op">;</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true"></a>    }</span></code></pre></div>
<h3 id="function-hoisting">function hoisting</h3>
<h4 id="function-code"><code>function</code> code</h4>
<p>It’s not that bad though and sometimes needed. This is here to complete the topic of hoisting.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true"></a>    <span class="kw">function</span> <span class="fu">serviceHandler</span> () {</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true"></a>        <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(get)<span class="op">;</span> <span class="co">// not an error</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true"></a>        <span class="fu">get</span>()<span class="op">;</span> <span class="co">// not an error</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true"></a>        <span class="kw">function</span> <span class="fu">binary</span> (input) {</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true"></a>            <span class="cf">return</span> input <span class="op">?</span> <span class="kw">true</span> <span class="op">:</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true"></a>        }</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true"></a>        <span class="co">/* variable name is hoisted up; thus no error while console.log(name) the first time */</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true"></a>        <span class="kw">function</span> <span class="fu">get</span> () {</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true"></a>            <span class="cf">return</span> <span class="st">&#39;Anu&#39;</span><span class="op">;</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true"></a>        }</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true"></a>    }</span></code></pre></div>
<h4 id="const-code-5"><code>const</code> code</h4>
<p><strong>No hoisting; only errors here.</strong></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true"></a>    <span class="kw">function</span> <span class="fu">serviceHandler</span> () {</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true"></a>        <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(get)<span class="op">;</span> <span class="co">// ERROR: ReferenceError: &quot;Uncaught ReferenceError: get is not defined&quot;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true"></a>        <span class="fu">get</span>()<span class="op">;</span> <span class="co">// wouldn&#39;t even reach here.</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true"></a>        <span class="kw">const</span> binary <span class="op">=</span> input <span class="kw">=&gt;</span> input <span class="op">?</span> <span class="kw">true</span> <span class="op">:</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true"></a>        <span class="co">// no hoist.</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true"></a>        <span class="kw">const</span> get <span class="op">=</span>  () <span class="kw">=&gt;</span> {</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true"></a>            <span class="kw">var</span> shouldLog <span class="op">=</span> <span class="fu">binary</span>(name)<span class="op">;</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true"></a>            <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(name)<span class="op">;</span> <span class="co">// logger.log // error</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true"></a>            <span class="kw">const</span> name <span class="op">=</span> <span class="st">&#39;Anu&#39;</span><span class="op">;</span> <span class="co">// service.getName(); // declare where need/use principle</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true"></a>            <span class="kw">var</span> shouldLog <span class="op">=</span> <span class="fu">binary</span>(name)<span class="op">;</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true"></a>            <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(name)<span class="op">;</span> <span class="co">// logger.log</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true"></a>            <span class="cf">return</span> name<span class="op">;</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true"></a>        }<span class="op">;</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true"></a>    }</span></code></pre></div>
<hr />
<h2 id="function-redefinition">Function redefinition</h2>
<h3 id="function-way"><code>function</code> way</h3>
<p>This can become issue while refactoring. Been there!</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true"></a>    <span class="kw">function</span> <span class="fu">add</span> (a<span class="op">,</span> b) {</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true"></a>        <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true"></a>    }</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">add</span>(<span class="dv">20</span><span class="op">,</span> <span class="dv">10</span>))<span class="op">;</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true"></a>    </span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true"></a>    <span class="kw">function</span> <span class="fu">add</span> (a<span class="op">,</span> b) {</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true"></a>        <span class="cf">return</span> a <span class="op">-</span> b<span class="op">;</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true"></a>    }</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">add</span>(<span class="dv">20</span><span class="op">,</span> <span class="dv">10</span>))<span class="op">;</span></span></code></pre></div>
<p>Now, if the console reads 30 for the first and 10 for second, then there is a problem; and, if the console reads 30 for the first and 30 for second, then there is a problem; and, if the console reads 10 for the first and 10 for second, then there is a problem.</p>
<p>Think about all three cases.</p>
<ol type="1">
<li>Spatial execution; but astute readers will notice that due to function hoisting, this case shouldn’t be possible. But, hey language/environment implementations are a thing.</li>
<li>Second onward implementations are thrown out.</li>
<li>Latest implementation dwarfs/shadows earlier ones.</li>
</ol>
<h3 id="const-way"><code>const</code> way</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true"></a>    <span class="kw">const</span> add <span class="op">=</span> (a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">add</span>(<span class="dv">20</span><span class="op">,</span> <span class="dv">10</span>))<span class="op">;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true"></a>    </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true"></a>    <span class="kw">const</span> add <span class="op">=</span> (a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">-</span> b<span class="op">;</span> <span class="co">// SyntaxError</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">add</span>(<span class="dv">20</span><span class="op">,</span> <span class="dv">10</span>))<span class="op">;</span></span></code></pre></div>
<hr />
<p>This should be enough to convince you or anyone to start using <code>const</code>.</p>
<p>If not, try to re-read.</p>
<p>If not, contact me at twitter <span class="citation" data-cites="f0c1s">@f0c1s</span> and we can have chat.</p>
<p>If not, do let me know why?</p>
